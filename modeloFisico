#use u1220050261;

# Tem que apagar no sentido inverso.
drop table if exists horario;
drop table if exists preRequisito;
drop table if exists disciplina;
drop table if exists curso;
drop table if exists professor;
drop table if exists aluno;



#aluno(*cpf,nome)
create table aluno(
	cpf   bigint unsigned primary key,
	nome  varchar(50),
	senha varchar(20)
); 

# professor(*siape, nome)cpf
create table professor(
	siape int unsigned primary key,
	nome varchar(50)
);
desc professor;

#curso(*codigo, nome)
create table curso(
	codigo smallint unsigned primary key,
	nome varchar(100)
);

#disciplina(*codigo, fase, CH, CHminima, **cursoCodigo, **professorSiape)
#   cursoCodigo referência curso(codigo)
#   professorSiape referencia professor(siape)
create table disciplina(
	codigo char(4) primary key,
	fase  tinyint unsigned,
	CH smallint unsigned,
	CHminima smallint unsigned,
	cursoCodigo smallint unsigned,
	professorSiape int unsigned,
	constraint fk_disciplina_cursoCodigo_curso_codigo foreign key (cursoCodigo) references curso(codigo),
	constraint fk_disciplina_professorSiape_disciplina_professor_siape foreign key (professorSiape) references professor(siape)

);

#Pré-requisito(***disciplina, ***pre-requisito)
#  disciplina referencia disciplina(codigo)
#  pre-requisito referencia disciplina(codigo)
create table preRequisito (
	id mediumint unsigned auto_increment primary key,
	disciplina char(4),
	preRequisito char(4),
	constraint fk_preRequisito_disciplina_disciplina_codigo foreign key (disciplina) references disciplina(codigo),
	constraint fk_preRequisito_preRequisito_disciplina_codigo foreign key (preRequisito) references disciplina(codigo)
);

#horário(*turno, *num_aula, *num_dia, *semanaAB, ***codigo_disciplina, semestre)
#  codigo_disciplina referencia disciplina(codigo)
# Foi colocado o id nessa tabela e na de cima, para tirar as chaves primárias duplas.
create table horario (
	id tinyint unsigned auto_increment primary key,
	turno tinyint unsigned,
	numAula tinyint unsigned,
	numDia tinyint unsigned,
	semanaAB tinyint unsigned,
	codigoDisciplina char(4),
	semestre smallint unsigned #,
	#constraint fk_horario_codigoDisciplina_disciplina_codigo foreign key (preRequisito) references disciplina(codigo)
);
